<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .calculator {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 35px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            max-width: 380px;
            width: 100%;
            transform: translateY(20px);
            opacity: 0;
            animation: slideIn 1s ease-out forwards;
            position: relative;
            overflow: hidden;
        }

        .calculator::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #ff6b6b, #ffa726);
            border-radius: 25px;
            z-index: -1;
            background-size: 400% 400%;
            animation: gradientBorder 4s ease infinite;
        }

        @keyframes gradientBorder {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes slideIn {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        h1 {
            text-align: center;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            font-size: 32px;
            font-weight: 700;
            animation: titlePulse 3s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .display {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border: none;
            border-radius: 15px;
            font-size: 28px;
            padding: 25px;
            text-align: right;
            margin-bottom: 25px;
            width: 100%;
            min-height: 70px;
            font-weight: 600;
            color: #2c3e50;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: translateY(10px);
            opacity: 0;
            animation: displaySlideIn 1.2s ease-out 0.3s forwards;
        }

        @keyframes displaySlideIn {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .display:focus {
            outline: none;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1), 0 0 20px rgba(102, 126, 234, 0.3);
            transform: scale(1.02);
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 18px;
        }

        button {
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: 700;
            padding: 22px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            outline: none;
            position: relative;
            overflow: hidden;
            transform: translateY(20px) scale(0.9);
            opacity: 0;
            animation: buttonSlideIn 0.6s ease-out forwards;
        }

        /* Stagger animation delays for buttons */
        button:nth-child(1) { animation-delay: 0.4s; }
        button:nth-child(2) { animation-delay: 0.45s; }
        button:nth-child(3) { animation-delay: 0.5s; }
        button:nth-child(4) { animation-delay: 0.55s; }
        button:nth-child(5) { animation-delay: 0.6s; }
        button:nth-child(6) { animation-delay: 0.65s; }
        button:nth-child(7) { animation-delay: 0.7s; }
        button:nth-child(8) { animation-delay: 0.75s; }
        button:nth-child(9) { animation-delay: 0.8s; }
        button:nth-child(10) { animation-delay: 0.85s; }
        button:nth-child(11) { animation-delay: 0.9s; }
        button:nth-child(12) { animation-delay: 0.95s; }
        button:nth-child(13) { animation-delay: 1.0s; }
        button:nth-child(14) { animation-delay: 1.05s; }
        button:nth-child(15) { animation-delay: 1.1s; }
        button:nth-child(16) { animation-delay: 1.15s; }
        button:nth-child(17) { animation-delay: 1.2s; }

        @keyframes buttonSlideIn {
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.6s ease;
            z-index: 0;
        }

        button:active::before {
            width: 300px;
            height: 300px;
        }

        button span {
            position: relative;
            z-index: 1;
        }

        button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(-1px) scale(0.98);
            transition: all 0.1s ease;
        }

        .number {
            background: linear-gradient(135deg, #e9ecef, #dee2e6);
            color: #2c3e50;
        }

        .number:hover {
            background: linear-gradient(135deg, #dee2e6, #ced4da);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .operator {
            background: linear-gradient(135deg, #667eea, #5a67d8);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .operator:hover {
            background: linear-gradient(135deg, #5a67d8, #4c51bf);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.5);
            transform: translateY(-3px) scale(1.05) rotate(2deg);
        }

        .equals {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            position: relative;
        }

        .equals:hover {
            background: linear-gradient(135deg, #ff5252, #f44336);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.5);
            transform: translateY(-3px) scale(1.05) rotate(-2deg);
        }

        .clear {
            background: linear-gradient(135deg, #ffa726, #ff9800);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 167, 38, 0.4);
        }

        .clear:hover {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            box-shadow: 0 10px 25px rgba(255, 167, 38, 0.5);
            transform: translateY(-3px) scale(1.05) rotate(1deg);
        }

        .zero {
            grid-column: span 2;
        }

        /* Calculation animation */
        .calculating {
            animation: pulse 0.5s ease-in-out;
            background: linear-gradient(45deg, #667eea, #ff6b6b, #ffa726, #764ba2);
            background-size: 300% 300%;
            animation: calculatingGlow 0.8s ease-in-out;
        }

        @keyframes calculatingGlow {
            0% {
                background-position: 0% 50%;
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
            }
            50% {
                background-position: 100% 50%;
                box-shadow: 0 0 30px rgba(255, 107, 107, 0.7);
            }
            100% {
                background-position: 0% 50%;
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Error animation */
        .error {
            animation: shake 0.6s ease-in-out;
            background: linear-gradient(135deg, #ff6b6b, #f44336) !important;
            color: white !important;
        }

        @keyframes shake {
            0%, 20%, 40%, 60%, 80%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        }

        /* Button press effect */
        .pressed {
            animation: buttonPress 0.2s ease;
        }

        @keyframes buttonPress {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        /* Floating particles */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            pointer-events: none;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h1>Calculator</h1>
        <input type="text" id="display" class="display" readonly>
        
        <div class="buttons">
            <button onclick="clearDisplay()" class="clear"><span>C</span></button>
            <button onclick="deleteLast()" class="clear"><span>←</span></button>
            <button onclick="appendToDisplay('/')" class="operator"><span>÷</span></button>
            <button onclick="appendToDisplay('*')" class="operator"><span>×</span></button>
            
            <button onclick="appendToDisplay('7')" class="number"><span>7</span></button>
            <button onclick="appendToDisplay('8')" class="number"><span>8</span></button>
            <button onclick="appendToDisplay('9')" class="number"><span>9</span></button>
            <button onclick="appendToDisplay('-')" class="operator"><span>-</span></button>
            
            <button onclick="appendToDisplay('4')" class="number"><span>4</span></button>
            <button onclick="appendToDisplay('5')" class="number"><span>5</span></button>
            <button onclick="appendToDisplay('6')" class="number"><span>6</span></button>
            <button onclick="appendToDisplay('+')" class="operator"><span>+</span></button>
            
            <button onclick="appendToDisplay('1')" class="number"><span>1</span></button>
            <button onclick="appendToDisplay('2')" class="number"><span>2</span></button>
            <button onclick="appendToDisplay('3')" class="number"><span>3</span></button>
            <button onclick="calculate()" class="equals"><span>=</span></button>
            
            <button onclick="appendToDisplay('0')" class="number zero"><span>0</span></button>
            <button onclick="appendToDisplay('.')" class="number"><span>.</span></button>
        </div>
    </div>

    <script>
        let display = document.getElementById('display');
        let currentInput = '';
        let shouldResetDisplay = false;

        // Create floating particles
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 3 + 's';
            document.body.appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
            }, 3000);
        }

        // Create particles periodically
        setInterval(createParticle, 800);

        // Add button press animation
        function animateButtonPress(element) {
            element.classList.add('pressed');
            setTimeout(() => {
                element.classList.remove('pressed');
            }, 200);
        }

        // Enhanced button click handlers
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', function() {
                animateButtonPress(this);
            });
        });

        function appendToDisplay(value) {
            if (shouldResetDisplay) {
                display.value = '';
                shouldResetDisplay = false;
                display.classList.remove('error');
            }
            
            // Prevent multiple decimal points
            if (value === '.' && display.value.includes('.')) {
                return;
            }
            
            // Prevent multiple operators in a row
            if (['+', '-', '*', '/'].includes(value)) {
                const lastChar = display.value.slice(-1);
                if (['+', '-', '*', '/'].includes(lastChar)) {
                    display.value = display.value.slice(0, -1) + value;
                    return;
                }
            }
            
            display.value += value;
            
            // Add input animation
            display.style.transform = 'scale(1.02)';
            setTimeout(() => {
                display.style.transform = 'scale(1)';
            }, 150);
        }

        function clearDisplay() {
            display.value = '';
            display.classList.remove('error');
            
            // Clear animation
            display.style.transform = 'scale(0.98)';
            setTimeout(() => {
                display.style.transform = 'scale(1)';
            }, 150);
        }

        function deleteLast() {
            display.value = display.value.slice(0, -1);
            display.classList.remove('error');
            
            // Delete animation
            display.style.transform = 'translateX(-5px)';
            setTimeout(() => {
                display.style.transform = 'translateX(0)';
            }, 150);
        }

        function calculate() {
            try {
                // Add calculating animation
                display.classList.add('calculating');
                
                setTimeout(() => {
                    // Replace display symbols with actual operators
                    let expression = display.value
                        .replace(/×/g, '*')
                        .replace(/÷/g, '/');
                    
                    // Evaluate the expression
                    let result = eval(expression);
                    
                    // Handle division by zero
                    if (!isFinite(result)) {
                        display.value = 'Error';
                        display.classList.add('error');
                    } else {
                        // Round to avoid floating point precision issues
                        result = Math.round(result * 100000000) / 100000000;
                        display.value = result;
                        
                        // Success animation
                        display.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            display.style.transform = 'scale(1)';
                        }, 300);
                    }
                    
                    display.classList.remove('calculating');
                    shouldResetDisplay = true;
                }, 500);
                
            } catch (error) {
                setTimeout(() => {
                    display.value = 'Error';
                    display.classList.remove('calculating');
                    display.classList.add('error');
                    shouldResetDisplay = true;
                }, 500);
            }
        }

        // Enhanced keyboard support with animations
        document.addEventListener('keydown', function(event) {
            const key = event.key;
            
            // Find and animate the corresponding button
            let buttonToAnimate = null;
            
            if (key >= '0' && key <= '9') {
                appendToDisplay(key);
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === key);
            } else if (key === '.') {
                appendToDisplay('.');
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === '.');
            } else if (key === '+') {
                appendToDisplay('+');
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === '+');
            } else if (key === '-') {
                appendToDisplay('-');
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === '-');
            } else if (key === '*') {
                appendToDisplay('*');
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === '×');
            } else if (key === '/') {
                event.preventDefault();
                appendToDisplay('/');
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === '÷');
            } else if (key === 'Enter' || key === '=') {
                calculate();
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === '=');
            } else if (key === 'Escape' || key.toLowerCase() === 'c') {
                clearDisplay();
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === 'C');
            } else if (key === 'Backspace') {
                deleteLast();
                buttonToAnimate = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.trim() === '←');
            }
            
            // Animate the button if found
            if (buttonToAnimate) {
                animateButtonPress(buttonToAnimate);
            }
        });

        // Add some initial particles
        for (let i = 0; i < 5; i++) {
            setTimeout(createParticle, i * 200);
        }
    </script>
</body>
</html>